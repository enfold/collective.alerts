{"version":3,"file":"chunks/100.1494b8e2e85470217720.min.js","mappings":"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","sources":["webpack://collective.alerts/./resources/js/jsalerts.pattern.js","webpack://collective.alerts/./resources/jsalerts-config.js"],"sourcesContent":["import $ from \"jquery\";\nimport Base from \"@patternslib/patternslib/src/core/base\";\nimport MD5 from \"crypto-js/md5\";\nimport \"jquery.cookie\";\nimport(\"./jsalerts.scss\");\n\n\nexport default Base.extend({\n    // The name for this pattern\n    name: 'alertmessage',\n    trigger: '.pat-alertmessage',\n    parser: 'mockup',\n    defaults: {\n        'get_message_view': '/get-alert-message',\n        'show_in_context': true,\n        'cache': false\n    },\n\n    set_cookie: function(data, action){\n      var self = this;\n      var cookie_expire = data.cookie_expire ? data.cookie_expire : 0;\n      var cookie_expire_minimize = data.cookie_expire_minimize ? data.cookie_expire_minimize : 0;\n\n      if (action === 'minimize' && (cookie_expire_minimize === 0 || isNaN(parseFloat(cookie_expire_minimize)))){\n        return;\n      }\n      if (action === 'close' && (cookie_expire === 0 || isNaN(parseFloat(cookie_expire)))){\n        return;\n      }\n\n      var md5_key = data.alert_location + data.title + data.cookie_expire + data.cookie_expire_minimize + data.display_on_every_page + data.klass + data.message + data.retract_timeout + data.date;\n\n      var val = MD5(md5_key);\n      var date = new Date();\n      if (action == 'close'){\n        date.setTime(date.getTime() + (cookie_expire * 60 * 60 * 1000));\n      }\n      if (action == 'minimize'){\n        date.setTime(date.getTime() + (cookie_expire_minimize * 60 * 60 * 1000));\n      }\n\n      $.cookie(\"alert.message.\"+action+\".\"+val.toString().slice(20), \"1\", { expires: date, path: '/' });\n    },\n\n    is_visible: function(data){\n      var self = this;\n      var should_show = false;\n      if (data.visible){\n        // Emergency message visible, now check cookie\n        var md5_key = data.alert_location + data.title + data.cookie_expire + data.cookie_expire_minimize + data.display_on_every_page + data.klass + data.message + data.retract_timeout + data.date;\n        var val = MD5(md5_key);\n        var close_cookie = $.cookie(\"alert.message.close.\"+val.toString().slice(20));\n\n        if (close_cookie === undefined){\n          // No cookie, now check if should be seen at homepage only\n          var display_on_every_page;\n          if (data.display_on_every_page === undefined){\n            // By default show on every page, unless explicitly denied\n            display_on_every_page = true;\n          }\n          else{\n            display_on_every_page = data.display_on_every_page;\n          }\n\n          if (display_on_every_page){\n            // This message should be displayed everywhere\n            should_show = true;\n          }\n          else{\n            should_show = self.options.show_in_context;\n          }\n\n        }\n        // Cookie was present, so we are not going to show the message\n      }\n\n      return should_show;\n    },\n\n    show_on_top: function(data){\n        var self = this;\n        var div = $('<div class=\"alert alert-'+data.klass+' alert-dismissible\" role=\"alert\"></div>');\n        var close = $('<button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"><span aria-hidden=\"true\">&times;</span></button>')\n                    .on('click', function () {\n                        self.$el.html(\"\");\n                        self.set_cookie(data, 'close');\n                    });;\n\n        var msg = $('<div></div>');\n        if (data.title !== \"\"){\n          msg.append($('<strong>'+data.title+': </strong>'));\n        }\n        if (data.message !== \"\"){\n          msg.append($('<span>'+data.message+'</span>'));\n        }\n        div.append(close);\n        div.append(msg);\n\n        self.$el.html(\"\");\n        self.$el.append(div);\n\n        if (data.retract_timeout !== 0){\n            setTimeout(function() {\n                div.remove();\n            }, data.retract_timeout * 1000);\n        }\n    },\n\n    show_slide: function(data, direction){\n      var self = this;\n\n      var slide_box = $('<div class=\"slide-alert-message\"></div>');\n      slide_box.addClass(direction);\n      slide_box.addClass('alert-'+data.klass);\n\n      var minimize = $('<button type=\"button\" class=\"close minimize\"><span aria-hidden=\"true\">&nbsp;-</span></button>')\n                  .on('click', function () {\n                      self.set_cookie(data, 'minimize');\n                      if (slide_box.hasClass('visible')){\n                        slide_box.removeClass('visible');\n                        clearTimeout(timeout);\n                      }\n                  });\n\n      var close = $('<button type=\"button\" class=\"close\"><span aria-hidden=\"true\">&times;</span></button>')\n                  .on('click', function () {\n                      self.$el.html(\"\");\n                      self.set_cookie(data, 'close');\n                  });\n\n      var msg = $('<div></div>');\n      if (data.message !== \"\"){\n        msg.append($('<span>'+data.message+'</span>'));\n      }\n      slide_box.append(close);\n      slide_box.append(minimize);\n      slide_box.append(msg);\n\n      self.$el.html(\"\");\n      self.$el.append(slide_box);\n\n      var timeout;\n      /* Trigger button to slide the notification open */\n      var trigger_tab = $('<span class=\"btn open-slide-alert-message\"></button>')\n                        .on('click', function () {\n                          if (slide_box.hasClass('visible')){\n                            slide_box.removeClass('visible');\n                            clearTimeout(timeout);\n                          }\n                          else{\n                            slide_box.addClass('visible');\n                            if (data.retract_timeout !== 0){\n                                timeout = setTimeout(function() {\n                                    slide_box.removeClass('visible');\n                                }, data.retract_timeout * 1000);\n                            }\n                          }\n                        });\n\n      trigger_tab.addClass(direction);\n      trigger_tab.addClass('alert-'+data.klass);\n      trigger_tab.html(data.title ? data.title : data.klass);\n      self.$el.append(trigger_tab);\n\n      var md5_key = data.alert_location + data.title + data.cookie_expire + data.cookie_expire_minimize + data.display_on_every_page + data.klass + data.message + data.retract_timeout + data.date;\n      var val = MD5(md5_key);\n      var minimize_cookie = $.cookie(\"alert.message.minimize.\"+val.toString().slice(20));\n      if (minimize_cookie === undefined){\n        /* Only open the notification if there is no cookie */\n        trigger_tab.trigger('click');\n      }\n\n    },\n\n    show_mobile: function(data){\n      var self = this;\n      var alert_box = $('<div class=\"slide-alert-message mobile\"></div>');\n      alert_box.addClass('alert-'+data.klass);\n\n      var close = $('<button type=\"button\" class=\"close\"><span aria-hidden=\"true\">&times;</span></button>')\n                  .on('click', function () {\n                      self.$el.html(\"\");\n                      self.set_cookie(data, 'close');\n                  });\n\n      var msg = $('<div></div>');\n      if (data.title !== \"\"){\n        msg.append($('<strong>'+data.title+': </strong>'));\n      }\n      if (data.message !== \"\"){\n        msg.append($('<span>'+data.message+'</span>'));\n      }\n      alert_box.append(close);\n      alert_box.append(msg);\n\n      self.$el.html(\"\");\n      self.$el.append(alert_box);\n    },\n\n    init: function() {\n      if (window.location.pathname.includes(\"@@set-alert-message\")){\n          return;\n      }\n      var self = this;\n      $.ajax({\n        url:      self.options.get_message_view,\n        type:     'GET',\n        context:  self.$el,\n        async:    true,\n        cache:    self.options.cache\n      }).done(function(data, status, xhr) {\n        if (!self.is_visible(data)){\n          return;\n        }\n        if(window.innerWidth <= 769) {\n            self.show_mobile(data);\n        }\n        else{\n            if (data.alert_location === 'fixed_top'){\n              self.show_on_top(data);\n            }\n\n            if (data.alert_location === 'slide_left'){\n              self.show_slide(data, 'left');\n            }\n\n            if (data.alert_location === 'slide_right'){\n              self.show_slide(data, 'right');\n            }\n\n            if (data.alert_location === 'slide_top'){\n              self.show_slide(data, 'top');\n            }\n        }\n      });\n    }\n  });\n","import registry from \"@patternslib/patternslib/src/core/registry\";\nimport \"./js/jsalerts.pattern\";\n\nregistry.init();\n"],"names":["Base","name","trigger","parser","defaults","set_cookie","data","action","cookie_expire","cookie_expire_minimize","isNaN","parseFloat","md5_key","alert_location","title","display_on_every_page","klass","message","retract_timeout","date","val","MD5","Date","setTime","getTime","$","toString","slice","expires","path","is_visible","should_show","visible","undefined","this","options","show_in_context","show_on_top","self","div","close","on","$el","html","msg","append","setTimeout","remove","show_slide","direction","slide_box","addClass","timeout","minimize","hasClass","removeClass","clearTimeout","trigger_tab","show_mobile","alert_box","init","window","location","pathname","includes","url","get_message_view","type","context","async","cache","done","status","xhr","innerWidth","registry"],"sourceRoot":""}